<!doctype html>
<html>
  <head>
    <title>Cat</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.6/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.6/flowbite.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>

    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />

    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          fontFamily: {
            body: [
              'Roboto'
              // other fallback fonts
            ],
            sans: [
              'Inter',
              'ui-sans-serif',
              'system-ui'
              // other fallback fonts
            ]
          }
        }
      }
      // localStorage.theme = 'light'
    </script>
  </head>

  <body class="w-full h-full p-0">
    <div class="rounded border-2 border-black m-20">
      <div class="p-5">
        <h1 class="text-lg">Add Book</h1>

        <form class="mt-6" id="eventForm">
          <div class="group p relative z-0 mb-6 w-full">
            <input
              name="title"
              id="title"
              class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
              placeholder=" "
              required
              
            />
            <label
              htmlFor="title"
              class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
            >
              Title
            </label>
          </div>

          <div class="group relative z-0 mb-6 w-full">
            <input
              type="text"
              name="author"
              id="author"
              class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
              placeholder=" "
              required
              
            />
            <label
              htmlFor="author"
              class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
            >
              Author
            </label>
          </div>

          <div class="grid md:grid-cols-2 md:gap-6">
            <div class="group relative z-0 mb-6 w-full">
              <input
                type="text"
                name="genre"
                id="genre"
                class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
                placeholder=" "
                required
                
              />
              <label
                htmlFor="genre"
                class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
              >
                Genre
              </label>
            </div>
            <div class="group relative z-0 mb-6 w-full">
              <input
                type="text"
                name="language"
                id="language"
                class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
                placeholder=" "
                required
                
              />
              <label
                htmlFor="language"
                class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
              >
                Language
              </label>
            </div>
          </div>
          <div class="grid md:grid-cols-2 md:gap-6">
            <div class="group relative z-0 mb-6 w-full">
              <input
                type="text"
                name="publisher"
                id="publisher"
                class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
                placeholder=" "
                required
                
              />
              <label
                htmlFor="publisher"
                class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
              >
                Publisher
              </label>
            </div>
            <div class="group relative z-0 mb-6 w-full">
              <input
                type="number"
                name="price"
                id="price"
                class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
                placeholder=" "
                
              />
              <label
                htmlFor="price"
                class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
              >
                Price
              </label>
            </div>
          </div>
          <div class="group relative z-0 mb-6 w-full">
            <input
              type="text"
              name="description"
              id="description"
              class="peer block w-full appearance-none border-0 border-b-2 border-gray-300 bg-transparent py-2.5 px-0 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500"
              placeholder=" "
              required
              
            />
            <label
              htmlFor="description"
              class="absolute top-3 -z-10 origin-[0] -translate-y-6 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500"
            >
              Description
            </label>
          </div>
          <div >
            <div class="group relative z-0 mb-6 w-full">
              <div class='mt-3 flex flex-col flex-wrap sm:flex-row'>
                <div class='text-md absolute top-3 text-lg z-10 origin-[0] -translate-y-6 scale-75 transform text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:left-0 peer-focus:-translate-y-6 peer-focus:scale-75 peer-focus:font-medium peer-focus:text-blue-600 dark:text-gray-400 peer-focus:dark:text-blue-500'>
                  Publication date
                </div>
                <div class='sm:w-[100%] mt-6 '>
                  <div class='flex justify-between'>
                    <select
                      id='date'
                      class='hover:border-orange h-10  w-[32%] cursor-pointer rounded-sm border border-black/10 px-3'
                    >
                      <option disabled>Ngày</option>
                      <% {_.range(1, 32).map((item) => { %>
                        <option value = <%= item %> >
                          <%= item %>
                        </option>

                      
                      <%  })} %>
                    </select>
                    <select
                      id='month'
                      class='hover:border-orange h-10 w-[32%] cursor-pointer rounded-sm border border-black/10 px-3'
                    >
                      <option disabled>Tháng</option>
                      <% {_.range(0, 12).map((item) => { %>
                        <option value=<%= item + 1%> %>>
                         <%= item + 1 %> 
                        </option>
                      <%  })}%>
                    </select>
                    <select
                      id='year'
                      class='hover:border-orange h-10 w-[32%] cursor-pointer rounded-sm border border-black/10 px-3'
                    >
                      <option disabled>Năm</option>
                      <%  {_.range(1990, 2024).map((item) => {%>
                        <option value=<%= item %>  %>>
                          <%= item%>
                        </option>
                      <% })} %>
                    </select>
                  </div>
                </div>
            </div>
          </div>
          <div class="flex items-center">
            <button
              type="submit"
              id="submit"
              class="w-full rounded-lg bg-blue-700 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 sm:w-auto"
            >
              Add
            </button>
            <div class="">
              <button
                id='back'
                class="ml-4 cursor-pointer rounded-lg bg-pink-500 px-5 py-3 text-sm font-medium text-white hover:bg-pink-700 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600"
              >
                Back
              </button>
            </div>
          </div>
        </form>
        
      </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
  <script>
    feather.replace()
    $('#back').on('click', function () {
        location.replace('/books/reads')
      })
    $('#eventForm').submit(function (e) {
          e.preventDefault();
          var title = $("#title").val().toString();
          var author = $("#author").val().toString();
          var genre = $("#genre").val().toString();
          var language = $("#language").val().toString();
          var publisher = $("#publisher").val().toString();
          var price = $("#price").val().toString();
          var description = $("#description").val().toString();
          var description = $("#description").val().toString();
          var date = $("#date").val().toString();
          var month = $("#month").val().toString();
          var year = $("#year").val().toString();
          var fulDateMonthYear = `${date}/${month}/${year}` 
          const inputDate = new Date(fulDateMonthYear);
          const isoString = inputDate.toISOString();
          const result = {title,author,genre,language,publication_date:isoString,publisher,price,description};
          console.log(result);
          axios({
            method: 'post',
            url: '/books/create/' ,
            data:result
          })
            .then((response) => {
              location.replace('/books/reads')
            })
            .catch((err) => console.log(err))
     });

   
  </script>
</html>
